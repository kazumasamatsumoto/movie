# #004 「Nest.jsのアーキテクチャ - MVCとDI」

四国めたん「NestJSのアーキテクチャはMVCとDIを融合しています」
ずんだもん「Controllerがリクエストを受けてServiceに渡すんだね」
四国めたん「Serviceはビジネスロジックを担当し、組み替え可能なProviderとして登録します」
ずんだもん「RepositoryやAPIクライアントも注入で差し替えられるよ」
四国めたん「Moduleが関心ごとをまとめて境界を明確にします」
ずんだもん「機能ごとにモジュールを分ければ拡張しやすいね」
四国めたん「DIコンテナが依存グラフを解決するのでテストも容易です」
ずんだもん「疎結合な構造でリファクタリングも怖くなくなるよ！」

---

## 📺 画面表示用コード

```typescript
// users.controller.ts
import { Controller, Get, Param } from '@nestjs/common';
import { UsersService } from './users.service';

@Controller('users')
export class UsersController {
  constructor(private readonly service: UsersService) {}

  @Get(':id')
  findOne(@Param('id') id: string) {
    return this.service.findOne(id);
  }
}

// users.service.ts
import { Injectable } from '@nestjs/common';
import { UsersRepository } from './users.repository';

@Injectable()
export class UsersService {
  constructor(private readonly repo: UsersRepository) {}

  findOne(id: string) {
    return this.repo.findById(id);
  }
}

// users.module.ts
import { Module } from '@nestjs/common';
import { UsersController } from './users.controller';
import { UsersRepository } from './users.repository';
import { UsersService } from './users.service';

@Module({
  controllers: [UsersController],
  providers: [UsersService, UsersRepository],
})
export class UsersModule {}
```
