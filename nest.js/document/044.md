# #044 「nest generate guard - ガード生成」

四国めたん「nest generate guardで独自の認可ガードを作れます」
ずんだもん「テンプレートには何が含まれるの？」
四国めたん「canActivateメソッドを持つクラスとテストファイルが生成されます」
ずんだもん「Authorizationヘッダーの検証に使えそうだね」
四国めたん「--implementsでGuard以外のインターフェースも指定できます」
ずんだもん「CLIでガードを揃えてセキュリティを強化するよ！」

---

## 📺 画面表示用コード

```typescript
// generate-guard.ts
export const generateGuard = 'nest g guard auth/auth --implements CanActivate';

// auth.guard.ts
import { CanActivate, ExecutionContext, Injectable } from '@nestjs/common';

@Injectable()
export class AuthGuard implements CanActivate {
  canActivate(context: ExecutionContext): boolean {
    const request = context.switchToHttp().getRequest<{ headers: Record<string, string> }>();
    return Boolean(request.headers['authorization']);
  }
}

// guard-test.ts
export const guardTestFile = 'src/auth/auth.guard.spec.ts';
```
