# #019 「TypeScript基礎復習 - ジェネリクスとインターフェース」

四国めたん「ジェネリクスとインターフェースはNestJSの型安全性を支えています」
ずんだもん「どこでジェネリクスを意識すればいいの？」
四国めたん「RepositoryやHttpClientのレスポンスに型を流し込みます」
ずんだもん「DTOとレスポンス型を共有できて助かるよ」
四国めたん「インターフェースで契約を定義して実装を差し替えましょう」
ずんだもん「テストダブルにも同じ型を使えるね」
四国めたん「型パラメータに制約を付ければ安全な再利用ができます」
ずんだもん「Genericsを使いこなすとNestJSの抽象化が活きるよ！」

---

## 📺 画面表示用コード

```typescript
// pagination.interface.ts
export interface Paginated<T> {
  items: T[];
  total: number;
  page: number;
  pageSize: number;
}

// repository.ts
import { Paginated } from './pagination.interface';

export interface Repository<T> {
  findById(id: string): Promise<T | null>;
  findAll(): Promise<Paginated<T>>;
}

// dto-mapper.ts
import { Paginated } from './pagination.interface';

export interface BaseDto {
  id: string;
}

export function mapResponse<T extends BaseDto>(entities: T[]): Paginated<T> {
  return {
    items: entities,
    total: entities.length,
    page: 1,
    pageSize: entities.length,
  };
}
```
