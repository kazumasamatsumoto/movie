# #048 「nest generate middleware - ミドルウェア生成」

四国めたん「nest generate middlewareでリクエスト前処理を追加できます」
ずんだもん「生成されるテンプレートは？」
四国めたん「useメソッドを実装するクラスと、Moduleへの適用例が出力されます」
ずんだもん「ログ出力や認証の下準備に使えるね」
四国めたん「AppModuleのconfigureで適用するのが基本パターンです」
ずんだもん「共通処理をミドルウェアにまとめて保守性を上げるよ！」

---

## 📺 画面表示用コード

```typescript
// generate-middleware.ts
export const generateMiddleware = 'nest g middleware common/logger';

// logger.middleware.ts
import { Injectable, NestMiddleware } from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';

@Injectable()
export class LoggerMiddleware implements NestMiddleware {
  use(req: Request, _res: Response, next: NextFunction) {
    console.log(`[${req.method}] ${req.originalUrl}`);
    next();
  }
}

// middleware-registration.ts
import { MiddlewareConsumer, Module, NestModule } from '@nestjs/common';
import { LoggerMiddleware } from './logger.middleware';

@Module({})
export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer.apply(LoggerMiddleware).forRoutes('*');
  }
}
```
