# #048 ã€Œnest generate middleware - ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ç”Ÿæˆã€

å››å›½ã‚ãŸã‚“ã€Œnest generate middlewareã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‰å‡¦ç†ã‚’è¿½åŠ ã§ãã¾ã™ã€
ãšã‚“ã ã‚‚ã‚“ã€Œç”Ÿæˆã•ã‚Œã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ï¼Ÿã€
å››å›½ã‚ãŸã‚“ã€Œuseãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ã‚¯ãƒ©ã‚¹ã¨ã€Moduleã¸ã®é©ç”¨ä¾‹ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€
ãšã‚“ã ã‚‚ã‚“ã€Œãƒ­ã‚°å‡ºåŠ›ã‚„èªè¨¼ã®ä¸‹æº–å‚™ã«ä½¿ãˆã‚‹ã­ã€
å››å›½ã‚ãŸã‚“ã€ŒAppModuleã®configureã§é©ç”¨ã™ã‚‹ã®ãŒåŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€
ãšã‚“ã ã‚‚ã‚“ã€Œå…±é€šå‡¦ç†ã‚’ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã«ã¾ã¨ã‚ã¦ä¿å®ˆæ€§ã‚’ä¸Šã’ã‚‹ã‚ˆï¼ã€

---

## ğŸ“º ç”»é¢è¡¨ç¤ºç”¨ã‚³ãƒ¼ãƒ‰

```typescript
// generate-middleware.ts
export const generateMiddleware = 'nest g middleware common/logger';

// logger.middleware.ts
import { Injectable, NestMiddleware } from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';

@Injectable()
export class LoggerMiddleware implements NestMiddleware {
  use(req: Request, _res: Response, next: NextFunction) {
    console.log(`[${req.method}] ${req.originalUrl}`);
    next();
  }
}

// middleware-registration.ts
import { MiddlewareConsumer, Module, NestModule } from '@nestjs/common';
import { LoggerMiddleware } from './logger.middleware';

@Module({})
export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer.apply(LoggerMiddleware).forRoutes('*');
  }
}
```
