# #008 「v10からv11への進化 - Breaking Changes」

四国めたん「v10からv11へ上げるときはBreaking Changesをチェックしましょう」
ずんだもん「まずはNode.js 18以上が必須になったんだね」
四国めたん「class-validator 0.14系への更新でエラーメッセージが微調整されています」
ずんだもん「DTOのバリデーション結果に差分が出るかもしれないよ」
四国めたん「CLIはSWCビルダーに一本化されwebpackオプションが整理されました」
ずんだもん「ビルドスクリプトを書き換える準備が必要だね」
四国めたん「CacheManagerのv5対応でカスタムストアの実装も更新しましょう」
ずんだもん「移行手順をドキュメント化してチーム全員で共有するよ！」

---

## 📺 画面表示用コード

```typescript
// node-version.guard.ts
const [major] = process.versions.node.split('.').map(Number);
if (major < 18) {
  throw new Error('NestJS v11 requires Node.js 18 or newer');
}

// main.ts
import { NestFactory } from '@nestjs/core';
import { useContainer } from 'class-validator';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  useContainer(app.select(AppModule), { fallbackOnErrors: true });
  await app.listen(3000);
}
bootstrap();

// cache.module.ts
import { CacheModule } from '@nestjs/cache-manager';
import { Module } from '@nestjs/common';
import { redisStore } from 'cache-manager-redis-yet';

@Module({
  imports: [
    CacheModule.registerAsync({
      useFactory: async () => ({
        store: await redisStore({ ttl: 10 }),
      }),
    }),
  ],
})
export class RedisCacheModule {}
```
