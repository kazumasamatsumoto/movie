# #023 「APIエンドポイント設計」

四国めたん「APIエンドポイント設計はリソース指向で整理しましょう」
ずんだもん「URLやメソッドの決め方で迷いがちなポイントは？」
四国めたん「リソース名は名詞、アクションはHTTPメソッドに委ねます」
ずんだもん「ネスト構造は最小限に抑えると読みやすいよ」
四国めたん「フィルタやソートはクエリパラメータで表現しましょう」
ずんだもん「ページングも統一したキーを決めたいね」
四国めたん「非同期ジョブはステータスリソースを切り出すと保守性が高まります」
ずんだもん「設計ガイドラインを決めておくとレビューが楽になるよ！」

---

## 📺 画面表示用コード

```typescript
// projects.controller.ts
import { Controller, Get, Param } from '@nestjs/common';

@Controller('projects')
export class ProjectsController {
  @Get(':projectId')
  findOne(@Param('projectId') projectId: string) {
    return { projectId };
  }
}

// tasks.controller.ts
import { Controller, Get, Param, Query } from '@nestjs/common';

@Controller('projects/:projectId/tasks')
export class TasksController {
  @Get()
  findTasks(
    @Param('projectId') projectId: string,
    @Query('status') status?: string,
    @Query('sort') sort: 'createdAt' | 'dueDate' = 'createdAt',
    @Query('page') page = 1,
  ) {
    return { projectId, status, sort, page: Number(page) };
  }
}

// jobs.controller.ts
import { Controller, Get, Param } from '@nestjs/common';

@Controller('jobs')
export class JobsController {
  @Get(':id/status')
  getStatus(@Param('id') id: string) {
    return { id, status: 'processing' };
  }
}
```
