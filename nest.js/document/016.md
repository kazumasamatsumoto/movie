# #016 「開発環境要件 - Node.js、npm/yarn」

四国めたん「NestJS v11を動かす開発環境要件を押さえましょう」
ずんだもん「Node.jsやnpmはどのバージョンが必要かな？」
四国めたん「Node.js 18 LTS以上とnpm 9系、あるいはyarn 3系が推奨です」
ずんだもん「corepackを使えばパッケージマネージャーを統一できるね」
四国めたん「SWCビルダーでESM対応する設定も忘れないでください」
ずんだもん「tsconfigやEnvの整合性をCIでチェックしたいよ」
四国めたん「DockerかVoltaでバージョン固定するのも有効です」
ずんだもん「要件をドキュメント化してチームに共有しておくよ！」

---

## 📺 画面表示用コード

```typescript
// env-check.ts
const [major] = process.versions.node.split('.').map(Number);
if (major < 18) {
  throw new Error('NestJS v11 requires Node.js 18+');
}

console.log('Node.js version OK:', process.version);

// package-manager.ts
import { execSync } from 'node:child_process';

const REQUIREMENTS = {
  npm: '>=9.6.0',
  yarn: '>=3.6.0',
};

function readVersion(command: string) {
  return execSync(`${command} -v`).toString().trim();
}

console.log('npm', readVersion('npm'), 'expected', REQUIREMENTS.npm);
console.log('yarn', readVersion('yarn'), 'expected', REQUIREMENTS.yarn);

// corepack-setup.ts
import { execSync } from 'node:child_process';

execSync('corepack enable', { stdio: 'inherit' });
execSync('corepack prepare yarn@3.6.1 --activate', { stdio: 'inherit' });
console.log('Package manager pinned with Corepack');
```
