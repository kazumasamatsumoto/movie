# #021 「HTTP基礎知識 - リクエスト/レスポンス」

四国めたん「NestJSを扱うにはHTTPの仕組みを理解しましょう」
ずんだもん「リクエストとレスポンスで押さえるべき要素は？」
四国めたん「メソッドとヘッダー、ステータスコード、ボディの関係です」
ずんだもん「Content-TypeでJSONやファイルを切り替えるんだね」
四国めたん「NestJSはExpress互換でRequestとResponseを扱えます」
ずんだもん「レスポンスを戻り値として返せば宣言的で読みやすいよ」
四国めたん「ストリームやファイルレスポンスも簡単に書けます」
ずんだもん「HTTPの仕組みを知ると挙動のイメージが描けるよ！」

---

## 📺 画面表示用コード

```typescript
// http.controller.ts
import { Controller, Get, Header } from '@nestjs/common';

@Controller('ping')
export class HttpController {
  @Get()
  @Header('Cache-Control', 'no-store')
  respond() {
    return { message: 'pong' };
  }
}

// headers.controller.ts
import { Controller, Get, Res } from '@nestjs/common';
import { Response } from 'express';

@Controller('headers')
export class HeadersController {
  @Get()
  send(@Res({ passthrough: true }) res: Response) {
    res.setHeader('X-Request-Handled-By', 'NestJS');
    return { ok: true };
  }
}

// request.controller.ts
import { Controller, Post, Req } from '@nestjs/common';
import { Request } from 'express';

@Controller('echo')
export class RequestController {
  @Post()
  echo(@Req() request: Request) {
    return {
      method: request.method,
      contentType: request.get('content-type'),
      body: request.body,
    };
  }
}
```
