# #010 「Express vs Fastify - Nest.jsアダプター選択」

四国めたん「NestJSはExpressとFastifyのアダプターを選べます」
ずんだもん「既存資産があるならExpress、速度優先ならFastifyだね」
四国めたん「v11では両者とも最新メジャーに追随し最適化が進みました」
ずんだもん「プラグインエコシステムも比較しながら選びたいよ」
四国めたん「HTTPアダプターはNestFactoryで簡単に差し替えられます」
ずんだもん「FastifyはJSONシリアライズが速くて軽量だよ」
四国めたん「Expressはミドルウェアが豊富で互換性が高いですね」
ずんだもん「案件ごとにベストを選べる柔軟さがありがたいよ！」

---

## 📺 画面表示用コード

```typescript
// main.express.ts
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';

async function bootstrapExpress() {
  const app = await NestFactory.create(AppModule);
  await app.listen(3000);
}
bootstrapExpress();

// main.fastify.ts
import { NestFactory } from '@nestjs/core';
import { FastifyAdapter, NestFastifyApplication } from '@nestjs/platform-fastify';
import { AppModule } from './app.module';

async function bootstrapFastify() {
  const app = await NestFactory.create<NestFastifyApplication>(AppModule, new FastifyAdapter());
  await app.listen({ port: 3000 });
}
bootstrapFastify();

// main.dynamic.ts
const useFastify = process.env.NEST_HTTP_ADAPTER === 'fastify';

async function bootstrap() {
  if (useFastify) {
    await bootstrapFastify();
  } else {
    await bootstrapExpress();
  }
}
bootstrap();
```
