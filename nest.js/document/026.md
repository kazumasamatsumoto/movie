# #026 「開発者ツール活用 - Postman」

四国めたん「PostmanはNestJSのAPIテストを素早く自動化できます」
ずんだもん「どう使うとチームで活用しやすいかな？」
四国めたん「コレクションをエクスポートして環境変数で接続先を切り替えます」
ずんだもん「プリリクエストスクリプトでトークン発行も自動化できるよ」
四国めたん「テストスクリプトでステータスやレスポンス形式を検証しましょう」
ずんだもん「assertを書けば手動テストが減らせるね」
四国めたん「CIではnewmanを使うと品質ゲートになります」
ずんだもん「Postmanワークスペースを共有してナレッジを残すよ！」

---

## 📺 画面表示用コード

```typescript
// postman.collection.ts
export const collection = {
  info: { name: 'NestJS API', schema: 'https://schema.getpostman.com/json/collection/v2.1.0/collection.json' },
  item: [
    {
      name: 'GET /users',
      request: { method: 'GET', url: '{{baseUrl}}/users' },
      event: [
        { listen: 'test', script: { exec: ['pm.test(\"status 200\", () => pm.response.to.have.status(200));'] } },
      ],
    },
  ],
} as const;

// postman.environment.ts
export const environment = {
  name: 'local',
  values: [
    { key: 'baseUrl', value: 'http://localhost:3000', enabled: true },
    { key: 'authToken', value: '', enabled: true },
  ],
};

// newman-runner.ts
import newman from 'newman';
import { collection } from './postman.collection';
import { environment } from './postman.environment';

newman.run(
  { collection, environment, reporters: ['cli'], iterationCount: 1 },
  (err) => {
    if (err) throw err;
    console.log('Postman tests done');
  },
);
```
