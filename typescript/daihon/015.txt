四国めたん「浮動小数点数の落とし穴について学びましょう！」
ずんだもん「小数の計算って難しいの？」
四国めたん「IEEE 754の仕様により、『0.1 + 0.2 === 0.3』はfalseになります。2進数で正確に表現できない小数があるためです。」
ずんだもん「えっ、それって大問題じゃない？」
四国めたん「実務では整数化や固定小数点演算で対処します。例えば金額は『amount * 100』でセント単位の整数にします。」
ずんだもん「Angularの料金計算で使えるね！」
四国めたん「Nest.jsでは『@Transform』デコレータで入力時に整数化できます。Number.EPSILONを使った誤差許容比較も有効ですよ。」
ずんだもん「型だけじゃなくアルゴリズムも大事だね！」