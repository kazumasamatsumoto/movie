# #544 ã€Œå®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³ã€

å››å›½ã‚ãŸã‚“ã€ŒAngular/Nest.jsã§ã®å®Ÿè·µãƒ‘ã‚¿ãƒ¼ãƒ³ã«ã¤ã„ã¦å­¦ã³ã¾ã—ã‚‡ã†ï¼ã€
ãšã‚“ã ã‚‚ã‚“ã€Œå®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã©ã†ä½¿ã†ã®ï¼Ÿã€
å››å›½ã‚ãŸã‚“ã€ŒçŠ¶æ…‹ç®¡ç†ã€APIé€šä¿¡ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã§ç¶²ç¾…æ€§ãƒã‚§ãƒƒã‚¯ã‚’æ´»ç”¨ã—ã¾ã™ã€
ãšã‚“ã ã‚‚ã‚“ã€Œå…·ä½“çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¦‹ã›ã¦ï¼ã€
å››å›½ã‚ãŸã‚“ã€ŒNgRxã®Reducerã€HttpInterceptorã€Exception Filterã§å‹å®‰å…¨æ€§ã‚’ç¢ºä¿ã—ã¾ã™ã­ã€
ãšã‚“ã ã‚‚ã‚“ã€Œãªã‚‹ã»ã©ï¼ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“ã§å‹å®‰å…¨ã«ãªã‚‹ã‚“ã ã­ï¼ã€
å››å›½ã‚ãŸã‚“ã€Œè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å‹ã‚·ã‚¹ãƒ†ãƒ ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€å …ç‰¢æ€§ãŒå‘ä¸Šã—ã¾ã™ã­ã€
ãšã‚“ã ã‚‚ã‚“ã€Œã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºé–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã ã‚ˆï¼ã€

---

## ğŸ“º ç”»é¢è¡¨ç¤ºç”¨ã‚³ãƒ¼ãƒ‰

```typescript
// NgRx Reducerãƒ‘ã‚¿ãƒ¼ãƒ³
type UserAction =
  | { type: 'LOAD_USER'; id: string }
  | { type: 'UPDATE_USER'; user: User }
  | { type: 'DELETE_USER'; id: string };

function userReducer(state: UserState, action: UserAction): UserState {
  if (action.type === 'LOAD_USER') return { ...state, loading: true };
  if (action.type === 'UPDATE_USER') return { ...state, user: action.user };
  if (action.type === 'DELETE_USER') return { ...state, user: null };
  const check: never = action;
  return state;
}
```

```typescript
// HTTP Interceptorãƒ‘ã‚¿ãƒ¼ãƒ³
type InterceptorAction =
  | { type: 'add-auth'; token: string }
  | { type: 'retry'; maxRetries: number }
  | { type: 'log' };

intercept(req: HttpRequest<any>, next: HttpHandler, action: InterceptorAction) {
  if (action.type === 'add-auth') return next.handle(req.clone({ setHeaders: { Authorization: action.token } }));
  if (action.type === 'retry') return next.handle(req).pipe(retry(action.maxRetries));
  if (action.type === 'log') return next.handle(req).pipe(tap(res => console.log(res)));
  const check: never = action;
}
```

```typescript
// ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
type ServiceResult<T> =
  | { success: true; data: T }
  | { success: false; error: ServiceError };

async function executeService<T>(result: ServiceResult<T>): Promise<T> {
  if (result.success) return result.data;
  if (!result.success) throw new ServiceException(result.error);
  const check: never = result;
}
```
