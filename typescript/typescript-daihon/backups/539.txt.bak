# #539 ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã€

å››å›½ã‚ãŸã‚“ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã®ç¶²ç¾…æ€§ãƒã‚§ãƒƒã‚¯ã«ã¤ã„ã¦å­¦ã³ã¾ã—ã‚‡ã†ï¼ã€
ãšã‚“ã ã‚‚ã‚“ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã©ã†ä½¿ã†ã®ï¼Ÿã€
å››å›½ã‚ãŸã‚“ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¿ã‚¤ãƒ—ã‚„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’åˆ¤åˆ¥Unionå‹ã§å®šç¾©ã—ã€ã™ã¹ã¦ã®ã‚±ãƒ¼ã‚¹ã‚’å‡¦ç†ã—ã¾ã™ã€
ãšã‚“ã ã‚‚ã‚“ã€Œå…·ä½“çš„ã«ã©ã†å®Ÿè£…ã™ã‚‹ã®ï¼Ÿã€
å››å›½ã‚ãŸã‚“ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã®å‡¦ç†åˆ†å²ã§ã€neverå‹ã«ã‚ˆã‚Šæœªå‡¦ç†ã‚±ãƒ¼ã‚¹ã‚’æ¤œå‡ºã§ãã¾ã™ã­ã€
ãšã‚“ã ã‚‚ã‚“ã€Œãªã‚‹ã»ã©ï¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã®æ¼ã‚Œã‚’é˜²ã’ã‚‹ã‚“ã ã­ï¼ã€
å››å›½ã‚ãŸã‚“ã€ŒExpressã€Nest.jsä¸¡æ–¹ã§æ´»ç”¨ã§ãã‚‹æ±ç”¨çš„ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã­ã€
ãšã‚“ã ã‚‚ã‚“ã€ŒAPIã®å“è³ªã¨ä¿å®ˆæ€§ãŒå‘ä¸Šã™ã‚‹ã‚ˆï¼ã€

---

## ğŸ“º ç”»é¢è¡¨ç¤ºç”¨ã‚³ãƒ¼ãƒ‰

```typescript
// ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¿ã‚¤ãƒ—å‡¦ç†
type RequestType = 'json' | 'form' | 'multipart';

@Injectable()
export class RequestParserMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction) {
    const contentType = this.getRequestType(req);

    if (contentType === 'json') return this.parseJson(req, next);
    if (contentType === 'form') return this.parseForm(req, next);
    if (contentType === 'multipart') return this.parseMultipart(req, next);
    const check: never = contentType;
    next();
  }
}
```

```typescript
// èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
type AuthMethod = 'bearer' | 'basic' | 'apikey';

function authenticate(method: AuthMethod, req: Request): boolean {
  if (method === 'bearer') return validateBearer(req);
  if (method === 'basic') return validateBasic(req);
  if (method === 'apikey') return validateApiKey(req);
  const check: never = method;
  return false;
}
```

```typescript
// ãƒ­ã‚®ãƒ³ã‚°ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
type LogLevel = 'debug' | 'info' | 'warn' | 'error';

function logRequest(level: LogLevel, message: string) {
  if (level === 'debug') return logger.debug(message);
  if (level === 'info') return logger.info(message);
  if (level === 'warn') return logger.warn(message);
  if (level === 'error') return logger.error(message);
  const check: never = level;
}
```
