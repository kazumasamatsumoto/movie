# #447ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã€

å››å›½ã‚ãŸã‚“ã€ŒNest.jsã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨voidå‹ã«ã¤ã„ã¦å­¦ã³ã¾ã—ã‚‡ã†ï¼ã€
ãšã‚“ã ã‚‚ã‚“ã€ŒãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§voidå‹ã¯ã©ã†ä½¿ã†ã®ï¼Ÿã€
å››å›½ã‚ãŸã‚“ã€ŒNestMiddleware ã® use() ãƒ¡ã‚½ãƒƒãƒ‰ã¯ void ã‚’è¿”ã—ã¾ã™ã€‚next() ã‚’å‘¼ã‚“ã§å‡¦ç†ã‚’ç¶šã‘ã¾ã™ã­ã€
ãšã‚“ã ã‚‚ã‚“ã€Œã©ã†å®Ÿè£…ã™ã‚‹ã®ï¼Ÿã€
å››å›½ã‚ãŸã‚“ã€ŒInjectable ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã¨NestMiddleware ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ã„ã¾ã™ã€‚ãƒ­ã‚®ãƒ³ã‚°ã‚„èªè¨¼ã§ä½¿ã„ã¾ã™ã­ã€
ãšã‚“ã ã‚‚ã‚“ã€Œãªã‚‹ã»ã©ï¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ã®å‰å¾Œãªã‚“ã ã­ï¼ã€
å››å›½ã‚ãŸã‚“ã€ŒExpress ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚TypeScript v5.9ã§ã‚‚åŒã˜ã§ã™ã­ã€
ãšã‚“ã ã‚‚ã‚“ã€Œã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã®åŸºæœ¬ãƒ‘ã‚¿ãƒ¼ãƒ³ãªã‚“ã ã­ï¼ã€

---

## ğŸ“º ç”»é¢è¡¨ç¤ºç”¨ã‚³ãƒ¼ãƒ‰

```typescript
// Nest.jsãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
import { Injectable, NestMiddleware } from '@nestjs/common';

@Injectable()
export class LoggerMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction): void {
    console.log(`${req.method} ${req.url}`);
    next();
  }
}
```

```typescript
// èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
@Injectable()
export class AuthMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction): void {
    if (!req.headers.authorization) {
      throw new UnauthorizedException();
    }
    next();
  }
}
```

```typescript
// è¤‡æ•°ã®å‡¦ç†
@Injectable()
export class CorsMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction): void {
    res.setHeader('Access-Control-Allow-Origin', '*');
    next();
  }
}
```
