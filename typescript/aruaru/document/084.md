# #084 「`Infer`のネストでコードレビュー止まる」制作ドキュメント

## 台本
ずんだもん「TypeScript書いてるとさ、`Infer`のネストでコードレビュー止まるって絶対あるよね？」
四国めたん「わかります。推論任せにすると意図しない型になって焦りますよね」
ずんだもん「しかもそのまま`Infer`のネストでコードレビュー止まる状態になって、チーム全員が固まるんだよ！」
四国めたん「そこでTypeScriptの型推論のヒント付けを使えば、ジェネリクス制約や型ガードを足せば推論が安定します」
ずんだもん「いや待って、それやると`Infer`のネストでコードレビュー止まる第2ラウンドが始まるやつ！」
四国めたん「共感した方は“推論あるある”ってコメントで教えてください！」
ずんだもん「あなたのTypeScriptあるあるも募集中だよ！」

## 画面表示用コード

```typescript
type User = { id: string; name?: string };

function hasName(user: User): user is User & { name: string } {
  return typeof user.name === "string";
}

function firstWithName<T extends User>(items: readonly T[]) {
  const target = items.find(hasName);
  if (!target) throw new Error("name missing");
  return target;
}

const users = [{ id: "u1", name: "m" }];
const firstUser = firstWithName(users);

type Name = typeof firstUser.name;

function shout(name: Name) {
  return name.toUpperCase();
}

shout(firstUser.name);
```

## 制作メモ
- **想定シーン**: `Infer`のネストでコードレビュー止まるに遭遇した瞬間を切り取るネタ
- **狙いトーン**: 焦りながらも冷静に仕組みを語る
- **技術キーワード**: 型推論, ジェネリクス制約, `infer`
- **使いたい一言**: 「推論あるある」
- **CTA案**: コメントで「推論あるある」と書いてもらい、同じ経験を募る
- **備考**: ジェネリクスを怖がらず使うコツとしてまとめると良いです。
