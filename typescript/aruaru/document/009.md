# #009 「`Partial`のまま本番投入して震えた朝」制作ドキュメント

## 台本
ずんだもん「`Partial`のまま本番投入して震えた朝って絶対あるよね？」
四国めたん「わかります。開発中だけのつもりが、気づけばOptionalだらけでデプロイされてるんですよね」
ずんだもん「しかも“nullチェック足りないよ”ってアラートが深夜に鳴って、Slackが地獄になるんだよ！」
四国めたん「それならTypeScriptの`Partial`はテスト専用にして、本番では`Required`や差分型で戻す仕組みを入れましょう」
ずんだもん「いや待って、差分型を戻したら今度はマイグレーション対応で朝になるやつ！」
四国めたん「共感した方は“Partial反省会”ってコメントで教えてください！」
ずんだもん「あなたのTypeScriptあるあるも募集中だよ！」

## 画面表示用コード

```typescript
type User = {
  id: string;
  name: string;
  role: "admin" | "editor";
};

type DraftUser = Partial<User>;

const draft: DraftUser = { id: "1" };

function publish(user: DraftUser): Required<User> {
  if (!user.name || !user.role) {
    throw new Error("missing field");
  }
  return user as Required<User>;
}

const ready = publish({ id: "1", name: "M", role: "admin" });
```

## 制作メモ
- **想定シーン**: 開発用の`Partial`がそのまま本番コードに残り、未定義アクセスで事故る朝
- **狙いトーン**: 「やっちまった…」と震えるテンションに軽いツッコミを添える
- **技術キーワード**: `Partial`, `Required`, フィールド検証, 型差分
- **使いたい一言**: 「Partial反省会」
- **CTA案**: コメントで“Partialでやらかした話”を共有してもらう
- **備考**: 画面には`Partial`→検証→`Required`化の流れを載せて、対策のヒントを示す
