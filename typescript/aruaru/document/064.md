# #064 「`isolatedModules`で怒られる瞬間」制作ドキュメント

## 台本
ずんだもん「TypeScript書いてるとさ、`isolatedModules`で怒られる瞬間って絶対あるよね？」
四国めたん「わかります。ESMとCJSの狭間で迷子になるのは週間行事ですよね」
ずんだもん「しかもそのまま`isolatedModules`で怒られる瞬間状態になって、チーム全員が固まるんだよ！」
四国めたん「そこでTypeScriptのモジュール解像度の整理を使えば、`module`と`moduleResolution`を合わせて揃えるのが近道です」
ずんだもん「いや待って、それやると`isolatedModules`で怒られる瞬間第2ラウンドが始まるやつ！」
四国めたん「共感した方は“module迷子”ってコメントで教えてください！」
ずんだもん「あなたのTypeScriptあるあるも募集中だよ！」

## 画面表示用コード

```typescript
// tsconfig.json
{
  "compilerOptions": {
    "module": "esnext",
    "moduleResolution": "bundler"
  }
}

// package.json
{
  "type": "module",
  "scripts": {
    "dev": "tsx src/index.ts"
  }
}

import { readFile } from "node:fs/promises";

async function main() {
  const pkg = await readFile("package.json", "utf8");
  console.log(pkg.length);
}

main();
```

## 制作メモ
- **想定シーン**: `isolatedModules`で怒られる瞬間に遭遇した瞬間を切り取るネタ
- **狙いトーン**: 混乱を笑いに変えるカオス系
- **技術キーワード**: ESM, CJS, moduleResolution
- **使いたい一言**: 「module迷子」
- **CTA案**: コメントで「module迷子」と書いてもらい、同じ経験を募る
- **備考**: import/exportの辛さを笑いに変える構成がハマります。
