# #152 「`this`型の指定、意識してる？」制作ドキュメント

## 台本
ずんだもん「`this`型の指定、意識してる？」
四国めたん「v5.9では関数の`this`パラメータを明示的に型付けることで、より安全なコードが書けます」
ずんだもん「ぼくはメソッドチェーンやイベントハンドラーで、`this`の型を明示的に指定してるんだよね」
四国めたん「`this`パラメータを指定すると、関数内で`this`の型が保証され、誤った呼び出しを防げます」
ずんだもん「jQuery風のメソッドチェーンを実装する時、`this`型を指定したら型推論がバッチリ効いたんだよ！」
四国めたん「みなさんは`this`型を意識的に指定していますか？」
ずんだもん「使い方や効果をコメントで教えてね！」

## 画面表示用コード

```typescript
// thisパラメータの明示的な指定
interface Counter {
  count: number;
  increment(this: Counter): void;
  decrement(this: Counter): void;
}

const counter: Counter = {
  count: 0,
  increment(this: Counter) {
    this.count++; // thisの型が保証される
  },
  decrement(this: Counter) {
    this.count--;
  }
};
```

```typescript
// メソッドチェーンでのthis型
class QueryBuilder {
  private query = '';

  select(this: QueryBuilder, fields: string): this {
    this.query += `SELECT ${fields} `;
    return this; // thisを返すことでチェーン可能
  }

  from(this: QueryBuilder, table: string): this {
    this.query += `FROM ${table} `;
    return this;
  }

  build(): string {
    return this.query;
  }
}

const query = new QueryBuilder()
  .select('*')
  .from('users')
  .build();
```

```typescript
// イベントハンドラーでのthis型
interface Button {
  label: string;
  handleClick(this: Button, event: MouseEvent): void;
}

const button: Button = {
  label: 'Click me',
  handleClick(this: Button, event: MouseEvent) {
    console.log(`Button "${this.label}" clicked`);
  }
};
```

## 制作メモ
- **問いの切り口**: this型の明示的指定の意識度
- **想定視聴者層**: オブジェクト指向的なコードを書くエンジニア
- **押さえる技術キーワード**: this型, thisパラメータ, メソッドチェーン
- **キャラの立場**: 四国めたん=型安全性の利点解説 / ずんだもん=実用例紹介
- **コメントで聞きたいこと**: this型指定の実践状況や効果
- **補足メモ**: メソッドチェーンという実用的なパターンで説明
