# #153 「クラスメソッドの`this`型、どう管理してる？」制作ドキュメント

## 台本
ずんだもん「クラスメソッドの`this`型、どう管理してる？」
四国めたん「v5.9ではクラスメソッドの`this`は通常自動で推論されますが、複雑なケースでは明示的な管理が有効です」
ずんだもん「ぼくはメソッドを変数に代入する場合や、コールバックとして渡す場合に`this`の扱いを意識してるんだよね」
四国めたん「アロー関数を使うか、`bind`を使うか、または`this`パラメータを明示的に指定するかで、`this`の型が変わります」
ずんだもん「Reactのクラスコンポーネントで、イベントハンドラーの`this`バインディングに苦労した経験があるんだよ！」
四国めたん「みなさんはクラスメソッドの`this`型をどう管理していますか？」
ずんだもん「ベストプラクティスをコメントで教えてね！」

## 画面表示用コード

```typescript
class Counter {
  count = 0;

  // 通常のメソッド（thisが動的）
  increment() {
    this.count++;
  }

  // アロー関数（thisが固定される）
  decrement = () => {
    this.count--;
  };

  // thisを失うケース
  getIncrementer() {
    return this.increment; // 危険: thisが失われる
  }

  // 安全なパターン
  getSafeIncrementer() {
    return this.increment.bind(this); // OK
    // または
    // return () => this.increment(); // OK
  }
}
```

```typescript
// Reactでの典型的なパターン
class MyComponent extends React.Component {
  state = { count: 0 };

  // パターン1: アロー関数（推奨）
  handleClick = () => {
    this.setState({ count: this.state.count + 1 });
  };

  // パターン2: コンストラクタでbind
  constructor(props: any) {
    super(props);
    this.handleClick2 = this.handleClick2.bind(this);
  }

  handleClick2() {
    this.setState({ count: this.state.count + 1 });
  }

  render() {
    return <button onClick={this.handleClick}>Click</button>;
  }
}
```

## 制作メモ
- **問いの切り口**: クラスメソッドのthis型管理
- **想定視聴者層**: クラスベースのコードを書くエンジニア
- **押さえる技術キーワード**: this, クラスメソッド, bind, アロー関数
- **キャラの立場**: 四国めたん=複数のアプローチ解説 / ずんだもん=実践的な苦労経験
- **コメントで聞きたいこと**: this管理のベストプラクティス
- **補足メモ**: Reactという実用的な文脈で説明
