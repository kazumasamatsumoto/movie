# #105 「`opaque type`パターン、実装してる？」制作ドキュメント

## 台本
ずんだもん「`opaque type`パターン、実装してる？」
四国めたん「v5.9では`unique symbol`を使った`opaque type`パターンがより安定しました」
ずんだもん「ぼくはファクトリ関数でしか生成できない型を作るのが好きなんだよね」
四国めたん「`opaque type`を使えば、型の内部構造を隠蔽してバリデーション済みを保証できます」
ずんだもん「現場だと不正な値の混入を防げて、実行時エラーが激減するんだよ！」
四国めたん「みなさんは`opaque type`パターンを使っていますか？」
ずんだもん「実装例をコメントで教えてね！」

## 画面表示用コード

```typescript
declare const opaqueSymbol: unique symbol;
type PositiveNumber = number & { [opaqueSymbol]: "PositiveNumber" };

function createPositive(n: number): PositiveNumber | null {
  return n > 0 ? (n as PositiveNumber) : null;
}

const num = createPositive(5); // PositiveNumber | null
```

## 制作メモ
- **問いの切り口**: opaque typeパターンを実装しているか
- **想定視聴者層**: 型安全性とバリデーションに関心があるエンジニア
- **押さえる技術キーワード**: opaque type, unique symbol, factory pattern
- **キャラの立場**: 四国めたん=整理役 / ずんだもん=実装現場視点
- **コメントで聞きたいこと**: 実装例や活用シーン
- **補足メモ**: バリデーション済みの値を保証する型の作り方を紹介
