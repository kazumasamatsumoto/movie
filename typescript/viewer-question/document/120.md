# #120 「`Error`サブクラス作る派？プレーンオブジェクト派？」制作ドキュメント

## 台本
ずんだもん「`Error`サブクラス作る派？プレーンオブジェクト派？」
四国めたん「v5.9では`Error`サブクラスの継承がより安定し、カスタムエラーの実装がしやすくなっています」
ずんだもん「ぼくは`Error`サブクラスを作って、エラーの種類ごとに型を分けるのが好きなんだよね」
四国めたん「`Error`サブクラスを使うとスタックトレースが保持され、`instanceof`チェックで型を絞り込めるメリットがあります」
ずんだもん「API呼び出しで、ネットワークエラーとバリデーションエラーを別クラスにしたら、エラー処理が整理されたんだよ！」
四国めたん「みなさんは`Error`サブクラスを作っていますか？」
ずんだもん「カスタムエラーの設計パターンをコメントで教えてね！」

## 画面表示用コード

```typescript
// Errorサブクラスのパターン
class ValidationError extends Error {
  constructor(public field: string, message: string) {
    super(message);
    this.name = 'ValidationError';
  }
}

class NetworkError extends Error {
  constructor(public statusCode: number, message: string) {
    super(message);
    this.name = 'NetworkError';
  }
}

// 使用例
try {
  await validateAndSave(data);
} catch (error) {
  if (error instanceof ValidationError) {
    console.error(`Invalid field: ${error.field}`);
  } else if (error instanceof NetworkError) {
    console.error(`HTTP ${error.statusCode}: ${error.message}`);
  }
}
```

```typescript
// プレーンオブジェクトパターン（関数型アプローチ）
type Result<T, E> =
  | { success: true; value: T }
  | { success: false; error: E };

type AppError =
  | { type: 'validation'; field: string; message: string }
  | { type: 'network'; statusCode: number; message: string };

function validateData(data: unknown): Result<Data, AppError> {
  // ...
}
```

## 制作メモ
- **問いの切り口**: Errorサブクラスとプレーンオブジェクトの選択
- **想定視聴者層**: エラー設計のベストプラクティスを知りたいエンジニア
- **押さえる技術キーワード**: Error, サブクラス, カスタムエラー, instanceof
- **キャラの立場**: 四国めたん=技術的メリット解説 / ずんだもん=実装経験からの推奨
- **コメントで聞きたいこと**: Errorサブクラスの使用状況や設計パターン
- **補足メモ**: 両方のアプローチを提示し、それぞれの利点を明確化
