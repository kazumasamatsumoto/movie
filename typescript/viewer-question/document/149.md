# #149 「`ConstructorParameters`使ったことある？」制作ドキュメント

## 台本
ずんだもん「`ConstructorParameters`使ったことある？」
四国めたん「v5.9では`ConstructorParameters`はクラスのコンストラクタ引数型を抽出でき、ファクトリー関数などで便利です」
ずんだもん「ぼくはDIコンテナやファクトリーパターンで、クラスの生成引数を型安全に扱う時に使ってるんだよね」
四国めたん「`ConstructorParameters`を使うと、クラスのインスタンス化ロジックを抽象化しても型安全性が保たれます」
ずんだもん「汎用的なファクトリー関数を作る時、`ConstructorParameters`で引数型を取得して型エラーなく実装できたんだよ！」
四国めたん「みなさんは`ConstructorParameters`を使ったことがありますか？」
ずんだもん「使用例や便利だった場面をコメントで教えてね！」

## 画面表示用コード

```typescript
// ファクトリー関数でクラスの引数を型安全に
class User {
  constructor(public id: string, public name: string) {}
}

function createInstance<T extends new (...args: any[]) => any>(
  ctor: T,
  ...args: ConstructorParameters<T>
): InstanceType<T> {
  return new ctor(...args);
}

const user = createInstance(User, '123', 'Alice'); // 型安全
// const invalid = createInstance(User, 123, 'Alice'); // Error
```

```typescript
// DIコンテナの実装
class Container {
  private instances = new Map<any, any>();

  register<T extends new (...args: any[]) => any>(
    token: T,
    ...args: ConstructorParameters<T>
  ): void {
    this.instances.set(token, new token(...args));
  }

  resolve<T extends new (...args: any[]) => any>(token: T): InstanceType<T> {
    return this.instances.get(token);
  }
}

const container = new Container();
container.register(User, '123', 'Alice');
const user2 = container.resolve(User);
```

## 制作メモ
- **問いの切り口**: ConstructorParametersの使用経験
- **想定視聴者層**: デザインパターンを実装するエンジニア
- **押さえる技術キーワード**: ConstructorParameters, ファクトリー, DI, クラス
- **キャラの立場**: 四国めたん=ユーティリティの用途解説 / ずんだもん=実装パターン紹介
- **コメントで聞きたいこと**: 使用経験や便利だった場面
- **補足メモ**: ファクトリーパターンとDIという実用的な文脈で説明
