# #155 「クラスの`private`、本当に守られてる？」制作ドキュメント

## 台本
ずんだもん「クラスの`private`、本当に守られてる？」
四国めたん「v5.9ではTypeScriptの`private`はコンパイル時のみで、JavaScriptにコンパイルすると消えてしまいます」
ずんだもん「ぼくは実行時にも本当にプライベートにしたい場合は、ES2022の`#private`フィールドを使うんだよね」
四国めたん「TypeScriptの`private`は型チェックのみで、実行時には通常のプロパティとしてアクセス可能です」
ずんだもん「TypeScriptの`private`を付けたプロパティが、本番で直接アクセスされて驚いたことがあるんだよ！」
四国めたん「みなさんはクラスの`private`の限界を理解していますか？」
ずんだもん「実行時の保護が必要な場合の対策をコメントで教えてね！」

## 画面表示用コード

```typescript
// TypeScriptのprivate（コンパイル時のみ）
class BankAccount {
  private balance: number = 0;

  deposit(amount: number) {
    this.balance += amount;
  }
}

const account = new BankAccount();
// account.balance = 1000000; // TypeScriptエラー
// しかし実行時には...
(account as any).balance = 1000000; // 実行時にはアクセス可能！
```

```typescript
// ES2022の#privateフィールド（実行時も保護される）
class SecureBankAccount {
  #balance: number = 0;

  deposit(amount: number) {
    this.#balance += amount;
  }

  getBalance() {
    return this.#balance;
  }
}

const secureAccount = new SecureBankAccount();
// secureAccount.#balance; // TypeScriptエラー
// (secureAccount as any).#balance; // 実行時エラー（本当にプライベート）
```

```typescript
// 両方を使い分ける
class User {
  // TypeScript private: 型安全性のため
  private internalId: string;

  // # private: 実行時の保護が必要
  #password: string;

  constructor(id: string, password: string) {
    this.internalId = id;
    this.#password = password;
  }
}
```

## 制作メモ
- **問いの切り口**: クラスのprivateの実際の保護度
- **想定視聴者層**: クラスのカプセル化を理解したいエンジニア
- **押さえる技術キーワード**: private, #private, カプセル化, 実行時保護
- **キャラの立場**: 四国めたん=コンパイル時と実行時の違い解説 / ずんだもん=実体験からの気づき
- **コメントで聞きたいこと**: privateの限界理解や実行時保護の対策
- **補足メモ**: TypeScriptとJavaScriptの違いを明確に説明
