# #318 「型安全性の向上」

四国めたん「strictNullChecksによる型安全性の向上について学びましょう!」
ずんだもん「型ガードでnullチェックすると、string型に絞り込めるんだね!」
四国めたん「はい。if文でnullを除外すると、その後はstring型として扱えます。」
ずんだもん「制御フロー分析で、TypeScriptが自動的に型を絞り込むんだよね?」
四国めたん「その通りです。returnやthrowの後は、nullでない型に絞り込まれます。」
ずんだもん「オプショナルチェーン?.も使えて便利だね!」
四国めたん「はい。user?.nameでnullやundefinedを安全に扱えます。」
ずんだもん「型ガードと制御フロー分析で、null安全なコードが書けるのだ!」

---


```typescript
/** Example 1: 型ガードで安全にアクセス */
function getLength(str: string | null): number {
  if (str !== null) {
    return str.length; // string型
  }
  return 0;
}

/** Example 2: 制御フロー分析 */
let value: string | null = getValue();
if (value === null) return;
value.toUpperCase(); // string型に絞り込み

/** Example 3: オプショナルチェーン */
const user: User | null = getUser();
const name = user?.name; // string | undefined
```
