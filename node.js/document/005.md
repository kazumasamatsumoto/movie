# #005 「メモリヒープとスタックの違い」

```javascript
// stack-trace.js
function depth(n) {
  if (n === 0) return 'done';
  return depth(n - 1);
}
console.log(depth(3));
```

```javascript
// heap-object.js
const user = { id: 1, profile: { name: 'Zunda' } };
console.log(user.profile.name);
globalThis.cache = user; // ヒープに残り続ける参照
```

```javascript
// memory-usage.js
const usage = process.memoryUsage();
console.log(`Heap used: ${Math.round(usage.heapUsed / 1024 / 1024)} MB`);
console.log(`Stack RSS: ${Math.round(usage.rss / 1024 / 1024)} MB`);
```
