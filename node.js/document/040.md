# #040 「ラウンドロビン方式」

```javascript
// cluster-rr.mjs
import cluster from 'node:cluster';
import os from 'node:os';
if (cluster.isPrimary) {
  cluster.schedulingPolicy = cluster.SCHED_RR;
  for (let i = 0; i < os.availableParallelism(); i += 1) {
    cluster.fork();
  }
} else {
  setInterval(() => process.send?.({ pid: process.pid }), 1000);
}
```

```bash
node cluster-rr.mjs
```

```text
SCHED_RR を設定するとマスタープロセスが接続をラウンドロビンでワーカーに配布します。
```
