# #050 「リソースリーク」

```javascript
// leak.mjs
import fs from 'node:fs';
setInterval(() => {
  const fd = fs.openSync(process.execPath, 'r');
  // 明示的に close しないため FD が増え続ける
}, 10);
```

```javascript
// safe.mjs
import fs from 'node:fs';
setInterval(() => {
  const fd = fs.openSync(process.execPath, 'r');
  try {
    fs.fstatSync(fd);
  } finally {
    fs.closeSync(fd);
  }
}, 10);
```

```bash
lsof -p $(pgrep -n node) | wc -l
```
