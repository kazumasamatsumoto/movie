# #016 「Idleフェーズの役割」

```javascript
// idle-delay.mjs
import { monitorEventLoopDelay } from 'node:perf_hooks';
const histogram = monitorEventLoopDelay({ resolution: 10 });
histogram.enable();
setInterval(() => {
  console.log(`mean delay: ${Math.round(histogram.mean / 1e6)}ms`);
  histogram.reset();
}, 200);
```

```c
// libuv-idle.c (参考)
void idle_cb(uv_idle_t* handle) {
  printf("libuv idle callback\n");
}

uv_idle_t idler;
uv_idle_init(loop, &idler);
uv_idle_start(&idler, idle_cb);
```

```bash
node --trace-event-categories=node.perf.idle idle-delay.mjs
```
