# #019 「Close Callbacksフェーズ」

```javascript
// close-callback.mjs
import net from 'node:net';
const server = net.createServer();
server.on('connection', socket => {
  socket.end('bye');
});
server.on('close', () => console.log('close callbacks phase executes'));
server.listen(0, () => {
  const { port } = server.address();
  net.connect(port).end();
  server.close();
});
```

```javascript
// resource-cleanup.mjs
import fs from 'node:fs';
const watcher = fs.watch('.', () => {});
process.on('exit', () => watcher.close());
```
