# #013 「イベントループの6つのフェーズ」

```javascript
// loop-phases.mjs
import fs from 'node:fs';
import { promisify } from 'node:util';
const stat = promisify(fs.stat);

setTimeout(() => console.log('timer phase'), 0);
setImmediate(() => console.log('check phase via setImmediate'));
fs.open(__filename, 'r', err => {
  if (err) throw err;
  console.log('pending I/O callback phase');
});

await stat(__filename);
console.log('poll phase promise resolved');

process.on('exit', () => console.log('close callbacks phase'));
```

```bash
node --trace-events-enabled loop-phases.mjs
```
