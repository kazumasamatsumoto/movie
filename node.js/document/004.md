# #004 「V8エンジンのJITコンパイラの仕組み」

```javascript
// optimize.js
function add(a, b) {
  return a + b;
}
for (let i = 0; i < 1e6; i++) add(1, 2);
console.log('Hot function executed');
```

```javascript
// deopt.js
function unstable(a) {
  return a + 1;
}
unstable(1);
unstable('1'); // 型が変わると最適化が外れる
```

```bash
# jit-flags.sh
node --trace-opt optimize.js
node --trace-deopt deopt.js
node --print-opt-code optimize.js
```
