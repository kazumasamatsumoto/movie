# #008 「Mark-and-Sweepアルゴリズム」

```javascript
// graph.js
const roots = ['window'];
const graph = new Map([
  ['window', ['app']],
  ['app', ['service']],
  ['service', []],
  ['orphan', []],
]);
```

```javascript
// mark.js
const marked = new Set();
function mark(node) {
  if (marked.has(node)) return;
  marked.add(node);
  for (const next of graph.get(node) ?? []) mark(next);
}
roots.forEach(mark);
```

```javascript
// sweep.js
for (const node of graph.keys()) {
  if (!marked.has(node)) graph.delete(node); // sweepで解放
}
console.log([...graph.keys()]);
```
