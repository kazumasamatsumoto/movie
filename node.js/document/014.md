# #014 「タイマーフェーズの動作」

```javascript
// timer-drift.mjs
const started = Date.now();
setTimeout(() => {
  const elapsed = Date.now() - started;
  console.log(`intended 10ms, elapsed ${elapsed}ms`);
}, 10);

setTimeout(() => {
  console.log('cancel me will not fire');
}, 100);

setTimeout(id => clearTimeout(id), 0, setTimeout(() => console.log('cleared'), 0));
```

```javascript
// precise-timing.mjs
import { PerformanceObserver, performance } from 'node:perf_hooks';
const obs = new PerformanceObserver(list => {
  for (const entry of list.getEntries()) {
    console.log(`${entry.name}: ${entry.duration.toFixed(2)}ms`);
  }
});
obs.observe({ entryTypes: ['function'] });

function work() {
  const now = performance.now();
  while (performance.now() - now < 15) {}
}

setTimeout(performance.timerify(work), 0);
```
