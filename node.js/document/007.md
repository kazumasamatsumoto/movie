# #007 「ガベージコレクションの動作原理」

```javascript
// gc-trigger.js
if (typeof global.gc === 'function') {
  global.gc(); // node --expose-gc で明示的にGCを起動
}
```

```javascript
// finalization.js
const registry = new FinalizationRegistry((label) => {
  console.log(`${label} collected`);
});
let obj = { heavy: Buffer.alloc(1024) };
registry.register(obj, 'cache');
obj = null;
```

```javascript
// heap-snapshot.js
import v8 from 'node:v8';
const file = v8.writeHeapSnapshot();
console.log(`Snapshot saved: ${file}`);
```
