# #424 ã€ŒKarma/Jasmine vs Jest/Vitest ã‚ãªãŸã¯ã©ã£ã¡æ´¾ï¼Ÿã€

## æ¦‚è¦
Karma/Jasmineã¯å…¬å¼æ¨™æº–ã§DOMäº’æ›ãŒå¼·ã¿ã€‚Jest/Vitestã¯ãƒ¢ãƒ€ãƒ³ãªDXã¨é€Ÿåº¦ãŒé«˜ã„ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®ç‰¹æ€§ã«åˆã‚ã›ã‚‹ã€‚

## å­¦ç¿’ç›®æ¨™
- Karma/Jasmineã®æ§‹æˆã¨å¾—æ„ãªã‚·ãƒŠãƒªã‚ªã‚’æ•´ç†ã™ã‚‹
- Jest/Vitestã®æ¡ç”¨ãƒ¡ãƒªãƒƒãƒˆã‚’ç†è§£ã™ã‚‹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¡ä»¶ã«å¿œã˜ãŸä½¿ã„åˆ†ã‘åŸºæº–ã‚’æ±ºã‚ã‚‹

## æŠ€è¡“ãƒã‚¤ãƒ³ãƒˆ
- Karma/Jasmineã‚’æˆã‚Šç«‹ãŸã›ã‚‹ä¸»è¦API/æ§‹æˆè¦ç´ 
- Jest/Vitestã§æŠ¼ã•ãˆã‚‹è¨­å®šã‚„ã‚³ãƒ¼ãƒ‰è¨˜è¿°
- ä¸¡è€…ã‚’å…±å­˜ãƒ»ç§»è¡Œã•ã›ã‚‹ãŸã‚ã®ãƒ–ãƒªãƒƒã‚¸æ‰‹æ³•

## ğŸ“º ç”»é¢è¡¨ç¤ºç”¨ã‚³ãƒ¼ãƒ‰ï¼ˆå‹•ç”»ç”¨ï¼‰
**Karmaæ´¾ï¼šangular.jsonã§æ¨™æº–è¨­å®š**
```typescript
"test": {
  "builder": "@angular-devkit/build-angular:karma",
  "options": {
    "polyfills": ["zone.js/testing"]
  }
}
```

**Jest/Vitestæ´¾ï¼šbuilderã‚’åˆ‡ã‚Šæ›¿ãˆ**
```typescript
"test": {
  "builder": "@angular-devkit/build-angular:jest",
  "options": {
    "setupFile": "src/setup-jest.ts"
  }
}
```

## ğŸ’» è©³ç´°å®Ÿè£…ä¾‹ï¼ˆå­¦ç¿’ç”¨ï¼‰
```typescript
// vitest.config.ts
export default defineConfig({
  test: {
    globals: true,
    environment: 'jsdom',
  },
});
```

## ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- æ—¢å­˜Karmaã§ã‚‚`esbuild`ãƒ™ãƒ¼ã‚¹ã®builderã¸åˆ‡ã‚Šæ›¿ãˆã€ã‚¦ã‚©ãƒƒãƒä½“é¨“ã‚’æ”¹å–„ã™ã‚‹
- Jest/Vitestå°å…¥æ™‚ã¯`setup`ãƒ•ã‚¡ã‚¤ãƒ«ã§`zone.js/testing`äº’æ›ã‚’æ•´å‚™ã™ã‚‹
- ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã‚’æ··åœ¨ã•ã›ã‚‹å ´åˆã¯CIã‚¸ãƒ§ãƒ–ã‚’åˆ†å‰²ã—ã€å®Ÿè¡Œæ™‚é–“ã‚’è¨ˆæ¸¬ã™ã‚‹

## æ³¨æ„ç‚¹
- Jest/Vitestã§ã¯ä¸€éƒ¨ã®ãƒ–ãƒ©ã‚¦ã‚¶APIãŒãƒ¢ãƒƒã‚¯ã«ãªã‚‹ãŸã‚ã€E2Eã§ã‚«ãƒãƒ¼ã™ã‚‹é ˜åŸŸã‚’æ˜ç¢ºã«ã™ã‚‹
- Karmaã¯CIã§ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹Chromeã«ä¾å­˜ã™ã‚‹ãŸã‚ã€ç’°å¢ƒæ§‹ç¯‰ã®è‡ªå‹•åŒ–ã‚’å¿˜ã‚Œãªã„
- builderåˆ‡ã‚Šæ›¿ãˆæ™‚ã¯`tsconfig.spec.json`ã®ãƒ‘ã‚¹ã‚‚æ›´æ–°ã™ã‚‹

## é–¢é€£æŠ€è¡“
- Karma
- Jest
- Vitest
